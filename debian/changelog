cupt (0.1.3) UNRELEASED; urgency=low

  * cupt:
    - 'show' subcommand:
      - Show also source version if present.
    - 'changelog' subcommand:
      - Use source version for fetching remote changelogs if present. Fixes
        determining remote path for versions that had a binary-only rebuild(s).
  * Cupt:
    - Cache:
      - BinaryVersion:
        - New field 'source_package_version'. It's got filled when the source
          version for package differs from the binary one.
      - Pkg:
        - [API break] Renamed to 'Package'.
        - [API break] Renamed method 'versions' to 'get_versions'.
      - Skip 'Explanation: ' lines when parsing preferences. Thanks to
        Stefano Zacchiroli <zack@debian.org>.
    - Download:
      - Method:
        - New free subroutine 'get_acquire_suboption_for_uri' which honors
          per-host settings.
    - Config:
      - Per-host suboption of 'acquire::*::timeout' is now supported.

 -- Eugene V. Lyubimkin <jackyf.devel@gmail.com>  Tue, 12 May 2009 23:29:01 +0300

cupt (0.1.2) experimental; urgency=low

  * cupt:
    - 'markauto'/'unmarkauto' subcommands:
      - Don't require worker at compilation stage. Speeds up compilation a bit.
    - Implemented '--no-remove' option for management actions.
    - Implemented '--no-auto-remove' option for management actions.
    - Selecting a version for binary package:
      - Allow '-' symbols in distribution names.
    - Properly output error when no command specified.
    - Use '#/usr/bin/env perl' for portability. Thanks to
      Michael Stapelberg <michael@stapelberg.de>.
    - New 'changelog' subcommand. Currently implemented only for installed
      packages and official Debian and Ubuntu repositories.
  * Cupt:
    - Core:
      - 'mydie', 'myerr', 'mywarn' subroutines now print to STDERR. Thanks to
        Stefano Zacchiroli <zack@debian.org>.
      - New subroutine 'is_version_string_native'.
    - Download:
      - Manager:
        - [API break] 'download' method: now one should specify array of URIs,
          not single URI for each download entry. Enables mirroring feature.
        - Advanced error message in download size check.
      - Methods/Curl:
        - Detect HTTP/FTP/HTTPS error codes.
        - Put HTTP/FTP/HTTPS response codes into error messages.
        - Don't put Curl internal error codes into error messages.
        - Follow HTTP redirects if the option
          'acquire::http::allow-redirects' is set to true.
      - Progress:
        - 'get_overall_download_percent': fixed division by zero when
          estimated total is zero.
      - Progresses/Console:
        - Enable auto-flushing when printing to the terminal.
    - System:
      - Worker:
        - Adapted to to changes in 'download' method of download manager.
        - Send also base URI to download progress so it can display it.
        - Give back transparent versioned 'remove','unpack','configure'
          actions and versionful check. Heavy hacks didn't guarantee full
          correctness, no reason to have them anymore.
        - Don't introduce action loops when uniting 'remove' and 'unpack'
          actions. This has to fix upgrading of packages containing
          'Pre-Depends' dependencies finally.
        - Put also installed and downgraded packages to package list version 1
          output for hooks. Dpkg-preconfigure should now work fully under Cupt.
        - Honor 'dpkg::pre-invoke' option.
        - Advanced error output for dpkg 'pre' actions.
        - Honor 'dpkg::post-invoke' option.
      - Resolver:
        - Use 'cupt::resolver::no-remove' option instead of 'no-remove' internal
          param.
        - Use 'cupt::resolver::type' option instead of 'resolver-type' internal
          param.
        - Check 'cupt::resolver::type' option for validity.
        - Use 'cupt::resolver::max-solution-count' option instead of
          'max-solution-cont' internal param.
        - [API break] Removed 'set_params' method, it is not needed anymore.
    - Cache:
      - Typo fix: 'incorrent' -> 'incorrect'. Thanks to
        Stefano Zacchiroli <zack@debian.org>.
      - Implemented 'easy' type of sources.list entry. Thanks to
        Stefano Zacchiroli <zack@debian.org>.
      - Don't choke on empty-for-us index files. Thanks to
        Stefano Zacchiroli <zack@debian.org>.
      - Fixed determining path for storing list file for indexes whose protocol
        doesn't have '//', e.g. 'file'.
        Thanks to Michael Stapelberg <michael@stapelberg.de>.
      - Warn, don't error, when description is not present in Release file.
      - New free subroutine 'get_path_of_debian_changelog'.
      - BinaryVersion:
        - [API break] Advanced return value for 'uris' method.
        - 'uris' method: filter duplicates.
    - Config:
      - New configuration option 'cupt::resolver::no-remove'.
      - New configuration option 'cupt::resolver::type'.
      - New configuration option 'cupt::resolver::max-solution-count'.
      - Changed default value for option
        'cupt::downloader::max-simultaneous-downloads' from 3 to 2.
      - Warn, don't error, on setting unknown list option, just like for
        regular options. Thanks to Stefano Zacchiroli <zack@debian.org>.
      - Skip broken parts of config files and warn, don't immediately stop.
      - Added the configuration option 'dpkg::pre-invoke'.
      - Added the configuration option 'dpkg::post-invoke'.
      - Added the configuration options 'rpm::pre-invoke' and
        'rpm::post-invoke'.
      - New configuration option 'acquire::http::allow-redirects'.

 -- Eugene V. Lyubimkin <jackyf.devel@gmail.com>  Sun, 10 May 2009 13:23:25 +0300

cupt (0.1.1.1) experimental; urgency=low

  * debian/control:
    - Put libwww-curl-perl to Build-Depends-Indep so t/file_method.t can load
      it.

 -- Eugene V. Lyubimkin <jackyf.devel@gmail.com>  Fri, 01 May 2009 01:49:41 +0300

cupt (0.1.1) experimental; urgency=low

  * doc/cupt.1.pod:
    - Added 'Author' section.
  * cupt:
    - Action preview prompt:
      - Generate additional warning when deleting essential packages.
      - Require typing the confirmation phrase for really dangerous actions.
      - Changed 'installed' -> 'INSTALLED' for untrusted packages warning.
    - 'satisfy' subcommand:
      - Now accepts sequences of relation expressions divided by commas within
        one argument.
    - 'config-dump' subcommand:
      - Added a mode to print a value of only one configuration option.
    - 'show' subcommand:
      - Changed 'PreDepends' -> 'Pre-Depends' in output.
    - Implemented option '--installed-only' for some query actions.
    - Implemented option '--download-only' for management actions.
  * Cupt:
    - Core:
      - 'human_readable_size_string': don't print fractional part for small
        float values.
    - Download:
      - Method, Methods/*:
        - [API break] 'sub_callback' in 'perform', added fetched bytes
          parameter for 'downloading' callback
        - Various documentation improvements.
      - Manager:
        - Road all progress requests through own pipe, not directly.
        - Update progress meter several times during a second.
        - Made more strings translatable.
      - Progress:
        - New method 'get_start_time'.
        - New method 'get_long_alias_for_uri'.
        - New method 'get_short_alias_for_uri'.
        - [API break] The control and flow logic was moved from
          Progresses/Console to 'progress' method.
        - New method 'hook' for subclasses.
        - New method 'get_overall_download_progress'.
        - New accessor/mutator 'download_entries'.
        - New method 'get_download_speed'.
        - New class-wide parameter variable 'o_download_speed_accuracy';
        - Various documentation improvements.
      - Progresses/Console:
        - Substituted obsoleted 'progress' method with new 'hook' method.
        - Fixed dangling, wrong-placed console cursor.
        - Also output download speed.
        - Output count of downloaded bytes for each package in
          human-readable form too (in addition to all size bytes count for
          package). In four words, "10829837/15.9MiB" -> '10.1MiB/15.9MiB'.
    - System:
      - Worker:
        - Honor 'cupt::worker::download-only' option.
        - Added 'debug::worker' config option to print some debug info.
        - Bump Pre-Depends requirements to 'configure' to make sure to not
          violate Debian Policy.
        - Merge all 'unpack' + 'configure' actions into 'install' action
          unconditionally.
        - Don't create fake 'remove' actions, just use existing 'install'
          ones instead. This should resolve problems with scheduling
          upgrading packages containing 'Pre-Depends'.
        - Made all inter-action relations unversioned, this should ensure that
          all 'install' -> 'remove' and 'remove' -> 'install' dependencies are
          not underestimated.
        - Ensure that download manager is destroyed before processing the
          result of downloads.
    - Config:
      - New option 'cupt::worker::download-only', defaults to false.
      - Use value of 'dir::bin::dpkg', not plain 'dpkg' to obtain
        archirecture.
      - The option 'gpgv::trustedkeyring' now defaults to
        '/var/lib/cupt/trusted.gpg'.
    - Cache:
      - Introduce the hack to copy APT's trusted keyring whenever possible to
        cupt's keyring place. It will be removed once key update mechanism
        would be implemented.
      - When checking signatures, generate proper error message if the keyring
        file doesn't exist.
      - Relation:
        - New free subroutine 'parse_relation_line' for parsing relation
          sequences.
  * debian/libcupt-perl.postinst:
    - Don't mess with /etc/apt/trusted.gpg for now. Instead copy it to cupt's
      own keyring place.
  * debian/libcupt-perl.prerm:
    - Introduced to clean up /var/lib/cupt directory.

 -- Eugene V. Lyubimkin <jackyf.devel@gmail.com>  Thu, 30 Apr 2009 23:19:35 +0300

cupt (0.1.0) experimental; urgency=low

  * Initial release. Dedicated to Pavel Chernyshov. Developers and advanced
    users only.

 -- Eugene V. Lyubimkin <jackyf.devel@gmail.com>  Tue, 07 Apr 2009 23:23:04 +0300
